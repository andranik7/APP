<!DOCTYPE html>
<html>
<head>
    <title>Page Test </title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="./style_test.css">
   
</head>

<body style="background-color:#364970;">

    <header>
        
    </header>
    <section>
        
            <div class='Panneau'>
                <h1>Panneau de contrôle</h1> 
                <div class="Button"  >
                    
                                    <button class="Button_t"  onclick="changePage(1)">Consigne</button>
                                    <button class="Button_t" onclick="changePage(2)" >Visualisation</button>
                                    
                        </div>
                    
                </div>  <!-- 添加注释 -->

                
                    <div class="Consigne_1" id="1" >
                        
                        <table frame="below" border rules=rows cellspacing=0 align=right>
                                    <tr>
                                        <th><h2><p style="color:#eba338;">Active</p></h2></th>
                                        <th><h2><p style="color:#eba338;">Consigne</p></h2></th>
                                        <th><h2><p style="color:#eba338;">Valeur</p></h2></th>
                                    </tr>
                                    <tr>
                                        <td align="middle"><label><input type="checkbox" name="light" style="color: "></label></td>
                                        <td align="middle"><h3>lumière</h3></td>
                                        <td align="middle">
                                            <form method="post" action="#">

                                            <input type="number" name="" placeholder="10" id="light" required style="font-size:15px;" min="10"max="30"step="5">
                                            </form>

                                           </label></td> 

                                    </tr>
                                    <tr>
                                        <td align="middle"><label><input type="checkbox" name="temperature"></label></td>
                                        <td align="middle"><h3>temperature</h3></td>
                                        <td align="middle">

                                            <form method="post" action="#">

                                            <input type="number" name="temperature" placeholder="25" id="temperature" required style="font-size:15px;" min="25"max="60"step="5">
                                            </form>
                                        </td> 
                                    </tr>
                                    <tr>
                                        <td align="middle"><label><input type="checkbox" name="sound"></label></td>
                                        <td align="middle"><h3>son</h3></td>
                                        <td align="middle">
                                            <form method="post" action="#">

                                            <input type="number" name="sound" placeholder="10" id="sound" required style="font-size:15px;" min="10"max="30"step="5">
                                            </form>

                                        </td> 
                                    </tr>
                                    <tr>
                                        <td align="middle"><label><input type="checkbox" name="distance"></label></td>
                                        <td align="middle"><h3>distance</h3></td>
                                        <td align="middle">
                                            <form method="post" action="#">

                                            <input type="number" name="distance" placeholder="5" id="distance" required style="font-size:15px;" min="5"max="100"step="5">
                                            </form>
                                        </td> 
                                    </tr>
                                    <tr>
                                        <td align="middle"><label><input type="checkbox" name="actionneur"></label></td>
                                        <td align="middle"><h3>actionneur</h3></td>
                                        <td align="middle"></td>
                                    </tr>
                                </table>   
                                <p> <bar /></p>         
                                
                                 
                     <button type="button"  onclick="changeStep(2)">Valider</button>   
                    </div>

                    <div class="Visualisation_1" id="2">
                        <canvas class="Canvas" id="canvas" width="450" height="300" style="border: 0px;"></canvas>
                        <script type="text/javascript">
                            var canvas=document.getElementById('canvas');

                                //Pour le title//
                                var title= canvas.getContext("2d");
                                title.fillStyle = "#eba338";
                                title.font = "20px Arial";
                                title.fillText("Les Consomations de capteurs", 80, 25);

                                //Pour le cercle//
                                var ctx=canvas.getContext('2d');
                                //Créer les data
                                var data_capteur = [
                                    {name:'lumière', color:'#EDA208', value:0.3},
                                    {name:'distance', color:'#ED9B1F', value:0.2},
                                    {name:'température', color:'#EDD7AA', value:0.35},
                                    {name:'son', color:'#EDCC8A', value:0.15},
                                    //{name:'actionneur', color:'EDA04C', value:0.25}
                                    
                                ];
                                 //Définir le centre du cercle
                                var x0 = canvas.width * 0.5, y0 = canvas.height * 0.60;//显示在画布中间
                                 //Définir le rayon
                                var radius = 90;
                                 //Définir l'angle de départ
                                var beginAngle = -90 *Math.PI/180;//(angle initial :-90deg)
                                 //Traverse, dessine un éventail
                                for (var i = 0; i < data_capteur.length; i++) {
                                    //angle de ventilation
                                    var tempAngle = data_capteur[i].value * 360 *Math.PI/180;
                                    //angle de fin
                                    var endAngle = beginAngle + tempAngle;

                                    ctx.beginPath();
                                    //point de départ
                                    ctx.moveTo(x0, y0);
                                    //radians de dessin
                                    ctx.arc(x0, y0, radius, beginAngle, endAngle);
                                    //Définir la coulor
                                    ctx.fillStyle = data_capteur[i].color;
                                    //Remplir la coulor
                                    ctx.fill();

                                    //Pour le text_capteur
                                    var textAngle = beginAngle + tempAngle * 0.5; //l'angle du text_capteur
                                    var text_capteur = data_capteur[i].name + ' '+data_capteur[i].value * 100 + '%';
                                    console.log(text_capteur);
                                    //Coordonnée du text
                                    var text_X = x0 + (radius + 10) * Math.cos(textAngle);
                                    var text_Y = y0 + (radius + 30) * Math.sin(textAngle);
                                    
                                    ctx.font = "15px 'Roboto'";
                                    //Déterminer si le texte est à gauche
                                    if((textAngle > 90 *Math.PI/180) && (textAngle < 270 *Math.PI/180) ) {
                                        ctx.textAlign = 'end';//Le côté droit du texte se trouve à l'extrémité gauche de la ligne de base
                                    }
                                    //Draw text
                                    ctx.fillText(text_capteur, text_X, text_Y);
                                    //Mettez à jour l'angle de départ et utilisez l'angle de fin du secteur actuel comme angle de départ du secteur suivant.
                                    beginAngle = endAngle;
                                }
                        </script>
            
                    </div>

                    
                
            </div>


        
        
    </section>
    <script type="text/javascript">
        

            // on initialise l'étape
            let step= 1;
            changePage(1); // pour se mettre à l'étape 1 dès le départ
            var initial=document.getElementById(1);

            // fonction pour changer l'étape

            function changePage(s)
            {
                step=s;
                if (1==s)
                 {
                    document.getElementById(1).style.display = "flex"
                    document.getElementById(1);
                    document.getElementById(2).style.display = "none"

                }
                else{
                    document.getElementById(2).style.display = "flex"
                    document.getElementById(2);
                    document.getElementById(1).style.display = "none"
                }


            }



    </script>

    

    
    
    
    
</body>
</html>
